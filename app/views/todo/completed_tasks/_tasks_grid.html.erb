<%if @tasks ==  nil%>
<p>No records found</p>

<%else%>
<% @completed = true %>
<%= render '/todo/shared/checkbox_buttons' %>
<div id='filters_container' style="margin-top: 5px; margin-left: 469px;">
<select id= 'elapsed_time' rel='tooltip' title='time filter' onchange = "apply_time_filter($(this).find('option:selected').text())">
<option selected='selected'>⌚<option>
<%@time_filter.each do |opt|%>
<option><%= opt.id2name %></option>
<%end%>
</select> 

<select id= 'priority_set' rel='tooltip' title='priority filter' onchange = "apply_priority_filter($(this).find('option:selected').text())">
<option selected="selected" >!</option>
<%@priorities.each do |opt|%>
<option><%= opt.id2name %></option>
<%end%>
</select>
</div>

<table cellspacing="0" style="width:653px; margin-top:10px;" id='blue_table'>
<tbody>
<tr style="width:653px;">
<%= render partial: '/todo/shared/headers' %>
<th style='width:50px;background-color: #E7E9D3;'></th>
<th style='width:20px;background-color: #E7E9D3;'></th>
<th style='width:50px;background-color: #E7E9D3;'></th>
</tr>
</tbody>
</table>

<div id='completed_tasks_container'>
<table cellspacing="0">
<tbody> 
<%@tasks.each do |task|%>
<%if task == nil%>
<%'do nothing'%>
<%else%>
<tr class='task-items'></tr>
<tr class="<%=task.id%> to-be-hovered completed" onmouseover = "show_actions(<%=task.id%>), bold(this)" onmouseout = "hide_actions(<%=task.id%>), unbold(this)">
<% @task = task %>
<%= render partial: '/todo/shared/checkbox', locals: {task: @task} %>

<% %w{description priority completed_at}.each do |attr|%>
<td id='<%=attr%>' class='items'><div><%= task.send attr %></div></td>
<%end%>
<td style = 'width: 50px;'><%= link_to '↺', reopen_todo_completed_task_path(task.id), method: :put, class: "reopen #{task.id}_action", style: 'display: none', remote: true %></td>
<td style = 'width: 20px;'><span style = 'display: none' class='pipe<%=task.id%> separator' >❘</span></td>
<td style = 'width: 50px;'><%= button_to '✘', "/todo/completed_tasks/#{task.id}", method: :delete, class: "delete #{task.id}_action", style: 'display: none',remote: true %></td>
</tr>
<%end%>
<%end%>
</tbody>
</table>
</div>
<%end%>

